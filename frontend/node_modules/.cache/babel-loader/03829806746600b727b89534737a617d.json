{"ast":null,"code":"import _slicedToArray from\"/Users/jerometo/Documents/django-todo-react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import Popup from'./components/Popup';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';function App(){// States\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),viewCompleted=_useState2[0],setViewCompleted=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),todoList=_useState4[0],setTodoList=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modal=_useState6[0],setModal=_useState6[1];var _useState7=useState({title:'',description:'',completed:false}),_useState8=_slicedToArray(_useState7,2),activeItem=_useState8[0],setActiveItem=_useState8[1];// Functions\nvar toggle=function toggle(){setModal(!modal);};var handleSubmit=function handleSubmit(item){toggle();if(item.id){// UPDATE request\naxios.put(\"/api/todos/\".concat(item.id,\"/\"),item).then(function(res){return refreshList();});// with a payload\nreturn;}//CREATE request\naxios.post('/api/todos/',item,{headers:{'Content-Type':'application/json'}}).then(function(res){return refreshList();});// if handleSubmit does not have an id, then will make post request\n};var handleDelete=function handleDelete(item){// DELETE request\naxios.delete(\"/api/todos/\".concat(item.id,\"/\")).then(function(res){return refreshList();});// from router class in rest_framework\n};var createItem=function createItem(){var item={title:'',description:'',completed:false};setActiveItem(item);setModal(!modal);};var editItem=function editItem(item){setActiveItem(item);setModal(!modal);};var displayCompleted=function displayCompleted(status){if(status){return setViewCompleted(true);}return setViewCompleted(false);};var renderTabList=function renderTabList(){return/*#__PURE__*/_jsxs(\"div\",{className:\"nav nav-tabs\",children:[/*#__PURE__*/_jsx(\"span\",{className:viewCompleted?'nav-link active':'nav-link',onClick:function onClick(){return displayCompleted(true);},children:\"Complete\"}),/*#__PURE__*/_jsx(\"span\",{className:viewCompleted?'nav-link':'nav-link active',onClick:function onClick(){return displayCompleted(false);},children:\"Incomplete\"})]});};var renderItems=function renderItems(){var newItems=todoList.filter(function(item){return item.completed==viewCompleted;});return newItems.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"todo-title mr-2 \".concat(viewCompleted?'completed-todo':''),title:item.description,children:item.title}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary mr-2\",onClick:function onClick(){return editItem(item);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return handleDelete(item);},children:\"Delete\"})]})]},item.id);});};var refreshList=function refreshList(){axios.get('/api/todos/')// READ request\n.then(function(res){return setTodoList(res.data);}).catch(function(err){return console.log(err);});};// Mount refreshList function at start\nuseEffect(function(){refreshList();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"main\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-white text-uppercase text-center my-4\",children:\"Todo app\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-sm-10 mx-auto p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:createItem,children:\"Add task\"})}),renderTabList(),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush border-top-0\",children:renderItems()})]})})}),modal?/*#__PURE__*/_jsx(Popup,{activeItem:activeItem,setActiveItem:setActiveItem,toggle:toggle,onSave:handleSubmit}):null]})});}export default App;","map":{"version":3,"sources":["/Users/jerometo/Documents/django-todo-react/frontend/src/App.js"],"names":["useEffect","useState","Popup","axios","defaults","xsrfCookieName","xsrfHeaderName","App","viewCompleted","setViewCompleted","todoList","setTodoList","modal","setModal","title","description","completed","activeItem","setActiveItem","toggle","handleSubmit","item","id","put","then","res","refreshList","post","headers","handleDelete","delete","createItem","editItem","displayCompleted","status","renderTabList","renderItems","newItems","filter","map","get","data","catch","err","console","log"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport Popup from './components/Popup';\nimport axios from 'axios';\n\naxios.defaults.xsrfCookieName = 'csrftoken';\naxios.defaults.xsrfHeaderName = 'X-CSRFToken';\n\nfunction App() {\n  // States\n  const [viewCompleted, setViewCompleted] = useState(false);\n  const [todoList, setTodoList] = useState([]);\n  const [modal, setModal] = useState(false);\n  const [activeItem, setActiveItem] = useState({\n    title: '',\n    description: '',\n    completed: false,\n  });\n\n  // Functions\n\n  const toggle = () => {\n    setModal(!modal);\n  };\n\n  const handleSubmit = (item) => {\n    toggle();\n    if (item.id) {\n      // UPDATE request\n      axios.put(`/api/todos/${item.id}/`, item).then((res) => refreshList()); // with a payload\n      return;\n    }\n    //CREATE request\n    axios\n      .post('/api/todos/', item, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n      .then((res) => refreshList()); // if handleSubmit does not have an id, then will make post request\n  };\n\n  const handleDelete = (item) => {\n    // DELETE request\n    axios.delete(`/api/todos/${item.id}/`).then((res) => refreshList()); // from router class in rest_framework\n  };\n\n  const createItem = () => {\n    const item = { title: '', description: '', completed: false };\n\n    setActiveItem(item);\n    setModal(!modal);\n  };\n\n  const editItem = (item) => {\n    setActiveItem(item);\n    setModal(!modal);\n  };\n\n  const displayCompleted = (status) => {\n    if (status) {\n      return setViewCompleted(true);\n    }\n\n    return setViewCompleted(false);\n  };\n\n  const renderTabList = () => (\n    <div className='nav nav-tabs'>\n      <span\n        className={viewCompleted ? 'nav-link active' : 'nav-link'}\n        onClick={() => displayCompleted(true)}\n      >\n        Complete\n      </span>\n      <span\n        className={viewCompleted ? 'nav-link' : 'nav-link active'}\n        onClick={() => displayCompleted(false)}\n      >\n        Incomplete\n      </span>\n    </div>\n  );\n\n  const renderItems = () => {\n    const newItems = todoList.filter((item) => item.completed == viewCompleted);\n\n    return newItems.map((item) => (\n      <li\n        key={item.id}\n        className='list-group-item d-flex justify-content-between align-items-center'\n      >\n        <span\n          className={`todo-title mr-2 ${viewCompleted ? 'completed-todo' : ''}`}\n          title={item.description}\n        >\n          {item.title}\n        </span>\n        <span>\n          <button\n            className='btn btn-secondary mr-2'\n            onClick={() => editItem(item)}\n          >\n            Edit\n          </button>\n          <button className='btn btn-danger' onClick={() => handleDelete(item)}>\n            Delete\n          </button>\n        </span>\n      </li>\n    ));\n  };\n\n  const refreshList = () => {\n    axios\n      .get('/api/todos/') // READ request\n      .then((res) => setTodoList(res.data))\n      .catch((err) => console.log(err));\n  };\n\n  // Mount refreshList function at start\n\n  useEffect(() => {\n    refreshList();\n  }, []);\n\n  return (\n    <div className='App'>\n      <main className='container'>\n        <h1 className='text-white text-uppercase text-center my-4'>Todo app</h1>\n        <div className='row'>\n          <div className='col-md-6 col-sm-10 mx-auto p-0'>\n            <div className='card p-3'>\n              <div className='mb-4'>\n                <button className='btn btn-primary' onClick={createItem}>\n                  Add task\n                </button>\n              </div>\n              {renderTabList()}\n              <ul className='list-group list-group-flush border-top-0'>\n                {renderItems()}\n              </ul>\n            </div>\n          </div>\n        </div>\n        {modal ? (\n          <Popup\n            activeItem={activeItem}\n            setActiveItem={setActiveItem}\n            toggle={toggle}\n            onSave={handleSubmit}\n          />\n        ) : null}\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}